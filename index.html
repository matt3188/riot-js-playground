<html>
<head>
  <meta charset="UTF-8">
  <title>Riot JS</title>
  <link rel="stylesheet" type="text/css" href="css/app.css">
</head>
<body>

  <contact-list></contact-list>
  
  <script src="bower_components/riot/riot+compiler.js"></script>

  <script src="tags/contact-list.tag" type="riot/tag"></script>

  <script>
    riot.mount('contact-list', { callback: tagCallback })

    function tagCallback(theTag) {
      console.log('Callback executed')

      var request = new XMLHttpRequest()
      request.open('GET', 'people.json', true)
      request.onload = function() {
        if(request.status == 200) {
          var data = JSON.parse(request.responseText)
          theTag.trigger('data_loaded', data.people)
        }
      }
      
      request.send()
    }
  </script>
</body>
</html>